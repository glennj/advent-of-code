#!/usr/bin/env tclsh
package require tcltest
namespace import ::tcltest::*
source ../lib/intcode.tcl.namespace

# part 1

test op-1.1 "no operations" -body {
    intcode::execute "99"
} -returnCodes ok -result "99"

test op-1.2 "addition 1" -body {
    intcode::execute "1,5,6,3,99,10,20"
} -returnCodes ok -result "1,5,6,30,99,10,20"

test op-1.3 "addition 2" -body {
    intcode::execute "1,0,0,0,99"
} -returnCodes ok -result "2,0,0,0,99"

test op-1.4 "addition 3" -body {
    intcode::execute "1,1,1,4,99,5,6,0,99"
} -returnCodes ok -result "30,1,1,4,2,5,6,0,99"

test op-1.5 "multiplication 1" -body {
    intcode::execute "2,3,0,3,99"
} -returnCodes ok -result "2,3,0,6,99"

test op-1.6 "multiplication 2" -body {
    intcode::execute "2,4,4,5,99,0"
} -returnCodes ok -result "2,4,4,5,99,9801"

test op-1.7 "multiple operations" -body {
    intcode::execute "1,9,10,3,2,3,11,0,99,30,40,50"
} -returnCodes ok -result "3500,9,10,70,2,3,11,0,99,30,40,50"

test op-1.8 "evaluate multiple operations" -body {
    intcode::evaluate "1,9,10,3,2,3,11,0,99,30,40,50" 9 10
} -returnCodes ok -result 3500

test op-1.9 "evaluate addition 2" -body {
    intcode::evaluate "1,0,0,0,99" 4 4
} -returnCodes ok -result [expr {99 + 99}]

cleanupTests
